!function(e){var t={};function o(l){if(t[l])return t[l].exports;var r=t[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=t,o.d=function(e,t,l){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(o.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(l,r,function(t){return e[t]}.bind(null,r));return l},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/dist",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var l=()=>{const e=document.querySelector("#club-select-ul");e.style.zIndex="9999";const t=l=>{l.target.closest("#club-select-title")&&(console.log("block"),e.style.display="block",document.removeEventListener("click",t),document.addEventListener("click",o))},o=l=>{!l.target.closest("#club-select-title")&&l.target.closest("#club-select-ul")||(console.log("none"),e.style.display="none",document.removeEventListener("click",o),document.addEventListener("click",t))};document.addEventListener("click",t)};var r=()=>{const e=document.querySelector(".fixed-gift"),t=document.querySelector("#gift");e.style.display="none",t.style.display="block",t.addEventListener("click",e=>{(e.target.closest(".close-btn")||!e.target.closest(".form-content")||e.target.closest("img"))&&(t.style.display="none")})};var n=(e,t,o)=>{const l=document.querySelector(""+e),r=l.querySelectorAll("input"),n=document.getElementById("thanks");let c;const s=e=>{(e.target.closest(".overlay")||e.target.closest(".close_icon")||e.target.closest(".close-btn"))&&(c.style.display="none",c.querySelector("form").reset(),r.forEach(e=>e.classList.remove("invalid")),c.removeEventListener("click",a))},a=e=>{(e.target.closest(".overlay")||e.target.closest(".close_icon")||e.target.closest(".close-btn"))&&(n.style.display="none",n.querySelector(".errorMessage")&&n.querySelector(".errorMessage").remove(),n.querySelector("#successMessage").style.display="none",n.removeEventListener("click",a))},i=()=>{setTimeout(()=>{n.style.display="none",n.querySelector(".errorMessage")&&n.querySelector(".errorMessage").remove(),n.querySelector("#successMessage").style.display="none",n.removeEventListener("click",a)},5e3)},u=e=>{const t=document.createElement("h4");"loading"===e?(t.classList.add("loadingMessage"),t.style="margin: auto;\n                            color: #ffd11a;\n                            background-color: #1e1c34;",t.textContent="Загрузка...",n.querySelector(".form-content").prepend(t)):"success"===e?(n.querySelector(".loadingMessage").remove(),n.querySelector("#successMessage").style.display="block"):"error"===e&&(n.querySelector(".loadingMessage").remove(),t.classList.add("errorMessage"),t.style="margin: auto;\n                            color: #ffd11a;\n                            background-color: #1e1c34;",t.textContent="Ошибка... Попробуйте еще раз",n.querySelector(".form-content").prepend(t))};t&&(c=document.querySelector(""+t),c.style.display="block",c.addEventListener("click",s)),l.addEventListener("submit",e=>{if(e.preventDefault(),(e=>{let t={};return e.forEach((e,o)=>{if(e.placeholder){if("Ваш номер телефона..."===e.placeholder){const l=()=>{e.removeEventListener("input",l);/(\+7|8)\d{10}/.test(e.value)?(console.log("Phone - true"),e.classList.remove("invalid"),t[o]=!0):(console.log("Phone - false"),e.classList.add("invalid"),e.addEventListener("input",l),t[o]=!1)};l()}if("Ваше имя..."===e.placeholder){const l=()=>{e.removeEventListener("input",l),""!==e.value?(console.log("Name - true"),e.classList.remove("invalid"),t[o]=!0):(console.log("name - false"),e.classList.add("invalid"),e.addEventListener("input",l),t[o]=!0)};l()}}else if(e.type){if("checkbox"===e.type)if(e.checked)console.log("check"),t[o]=!0;else{t[o]=!1;(()=>{let t=0;!function o(){t>-8?(t--,document.querySelector(`label[for=${e.id}]`).style.top=t+"px",requestAnimationFrame(o)):-8===t&&(document.querySelector(`label[for=${e.id}]`).style.top="0px")}()})()}if("radio"===e.type&&!0!==t.radio)if(e.checked)console.log("check"),t.radio=!0;else{console.log("notcheck"),t.radio=!1;(()=>{let t=0;!function o(){t>-8?(t--,document.querySelector(`label[for=${e.id}]`).style.top=t+"px",requestAnimationFrame(o)):-8===t&&(document.querySelector(`label[for=${e.id}]`).style.top="0px")}()})()}}}),!Object.values(t).includes(!1)})(r)){const e=new FormData(l);l.reset();let o={};e.forEach((e,t)=>{o[t]=e}),t&&(c.style.display="none"),n.style.display="block",u("loading"),n.addEventListener("click",a),((e,t,o)=>{fetch("./server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}).then(e=>{if(200!==e.status)throw o;t()}).catch(o)})(o,()=>{u("success"),i()},()=>{u("error"),i()})}})};var c=()=>{const e=document.getElementById("cards"),t=e.querySelector("#price-total"),o=e.querySelector("#promoCode"),l=e.querySelector(".card_order");let r;const c={mozaika:{1:1999,6:9900,9:13900,12:19900},schelkovo:{1:2999,6:14990,9:21990,12:24990}},s={"ТЕЛО2020":.3,"ПРИМЕР":.5},a={mozaika:!1,schelkovo:!1},i={1:!1,6:!1,9:!1,12:!1},u=document.createElement("input");u.type="hidden",u.name="price",l.append(u);const d=()=>{let e,o;for(let t in a)!0===a[t]&&(e=t);for(let e in i)!0===i[e]&&(o=e);r=c[e][o],t.textContent=r,u.value=r},f=()=>{const t=e.querySelectorAll('input[name="club-name"]'),o=e.querySelectorAll('input[name="card-type"]');t.forEach(e=>{e.checked&&(a[e.defaultValue]=!0),e.checked||(a[e.defaultValue]=!1)}),o.forEach(e=>{e.checked&&(i[e.defaultValue]=!0),e.checked||(i[e.defaultValue]=!1)}),d()};f();const y=()=>{console.log(r);const e=r;let l;for(let n in s){if(n===o.value)return l=e-e*s[n],t.textContent=Math.floor(l),void(u.value=Math.floor(l));t.textContent=r,u.value=r}};o.addEventListener("input",y),e.addEventListener("click",e=>{let t=e.target;if(t.closest("input"))if("card-type"===t.name)for(let e in i)e===t.defaultValue&&(i[e]=!0),e!==t.defaultValue&&(i[e]=!1);else if("club-name"===t.name)for(let e in a)e===t.defaultValue&&(a[e]=!0),e!==t.defaultValue&&(a[e]=!1);d(),y()}),n("#card_order"),l.addEventListener("reset",()=>{setTimeout(()=>f(),1e3)})};document.querySelectorAll("input").forEach(e=>{"Ваш номер телефона..."===e.placeholder?e.addEventListener("input",()=>{e.value=e.value.replace(/[^\d]/g,"")}):"Ваше имя..."===e.placeholder&&e.addEventListener("input",()=>{e.value=e.value.replace(/[^А-Яа-я ]/g,"")})}),l(),document.addEventListener("click",e=>{let t=e.target;t.closest("#visit-btn")&&n("#form2","#free_visit_form"),t.closest("#callback-header")&&n("#form1","#callback_form"),t.closest(".fixed-gift")&&r(),t.closest("#totop")&&(e.preventDefault(),document.querySelector(".header-main").scrollIntoView({behavior:"smooth",block:"start"})),t.closest(".scrollMenu")&&(e.preventDefault(),document.querySelector(""+t.hash).scrollIntoView({behavior:"smooth",block:"start"})),(t.closest(".close-menu-btn")||t.closest(".scrollMenu"))&&(document.querySelector(".popup-menu").style.display="none"),t.closest("#burger")&&(document.querySelector(".popup-menu").style.display="flex")}),document.addEventListener("scroll",()=>{pageYOffset>=186&&document.querySelector(".top-menu").classList.add("fixed"),pageYOffset<186&&document.querySelector(".top-menu").classList.remove("fixed"),pageYOffset>=800&&(document.querySelector("#totop").style.display="block"),pageYOffset<800&&(document.querySelector("#totop").style.display="none")}),n("#banner-form"),n("#footer_form"),document.querySelector(".card_order_second")&&n(".card_order_second"),document.querySelector(".card_order")&&c()}]);